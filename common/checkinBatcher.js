var http = require('http');
http.post = require('http-post');
var M = require('mstring')

var phones_data = M(function(){
  /***
9871768808
9811044451
8826104646
9810032379
8886011130
9818256212
9810444043
9711209240
8376937341
9811447919
9911388959
9958885560
8527064477
9911083000
8800766441
9811333666
9811815815
9716004020
9910000193
9871431112
9871594335
9810600337
9871773806
9810730403
9176619678
9560899234
9910082650
9811419560
9268735375
9871820156
9910340234
9811628194
9811900968
9891188158
9717596188
9910615023
9910776999
9810515511
9810415511
9899900400
9910066236
9971612200
9811444418
8826099499
9811527267
8130868784
9718191828
9811396767
9910258832
8800681188
9899138827
9958111645
9873188617
9999998560
8527949833
9911177140
9999770057
9540000738
8587895401
8826148606
9810460313
9717462935
9811645607
8826688769
8285356033
9811783263
8860005501
8826546664
8826895882
9999981434
9811008299
9873467976
9810166363
9818923654
9711558438
9811997877
9953473009
9818996971
9818248069
9810617884
9811135521
9899678939
9811083114
9560061530
9998480217
8750608381
9971548500
9810789998
9910006864
9899944091
9810223256
9811787413
9911000783
9582529994
9811132142
9711166187
9810084525
9871070676
9654369966
9818836226
9873071885
9810162964
9810266250
9958429222
9717494894
9810940658
9999949779
9811131900
9990038320
9811790752
9999799815
9958316053
9868469603
8860680808
9211791029
9871751100
9971279666
9810083215
7838226474
9818995157
9891160866
9810313650
9811406754
9818551193
9810153584
9899920605
9312506056
9811203314
7838665925
9811666418
9650063673
9953248681
9810510353
9313488515
9873687650
9958574872
9810287357
9711924114
9560348049
9654231132
9871516778
9871299517
9999505639
9899324360
9810049663
9313200026
9999993162
9811484476
9810284949
9560899237
7827101074
9811122417
9871122222
9212397263
9811918684
8586900775
9711166118
9873545452
9871552256
9999996699
9999997679
9811018007
8860062151
9891605665
9711929464
9716005339
9999767855
9871845879
9811836969
9810482344
9818822660
9891348668
9717766854
9810049530
9871555066
9899694141
9811045340
9811982251
8800411944
9811418055
9899162801
9910095555
9810461313
9873219490
9871114282
9810320483
9999190941
9818301933
9958090464
7838263593
9810094678
9958080329
9953958196
8826292485
9958645616
8459422215
9999093768
9990505554
9990896781
9999505638
9899252713
7503121032
9650525916
9560244188
7838177701
9953160523
9971154491
9971344837
9871424067
9810639188
9560518080
9818461958
9717066266
9810313825
9910777256
9831097876
9811034954
9840738689
9871355335
9873115000
8800281616
9717555422
9871749713
9811535540
8860937531
9811808198
9971307765
9953413911
9716442109
9810317667
9810806636
8130411933
9811472104
9266843333
8826392075
9818010857
9899316956
9654457592
9810106069
9555077477
7483214933
9177735000
9818657970
8130355366
9953333623
9810213191
9650147343
8860135159
8130833625
9871332121
9810374518
9871303236
***/});
phones_data = phones_data.split(/\n/);

var phones = [];
phones_data.forEach(function (p) {
	p = p.replace(/\r/g, '');
	if(p.length >= 10) {
		phones.push(p);
	}
});

var i = 0;
phones.forEach(function (phone) {
	++i;
	setTimeout(function() {
		httpCheckin(phone);
	}, i * 1000);
})

function httpCheckin (phone) {
	console.log(phone)
	http.post('http://twyst.in/api/v2/checkins', {
		phone: phone,
        outlet: "538363793557ce320800002f",
        location: 'DINE_IN',
        created_date: new Date(),
        batch_user: true,
        message: "We love having your over at Deewani Haandi! As a small way of saying thanks, we have enrolled you into our new loyalty program on Twyst. You get 10% off on your next visit/order (Voucher code xxxxxx). Check-in on Twyst on each visit/order for bigger rewards (Free rolls & biryanis!). Click http://goo.gl/Kowd8G to get Twyst for Android."
	},
	function(res){
		console.log(res.statusCode);
		var body;
		res.on('data', function(chunk) {
	        // append chunk to your data
	        body += chunk;
	    });

	    res.on('end', function() {
	        console.log(body);
	    });

	    res.on('error', function(e) {
	        console.log("Error message: " + e.message)
	    });
	});
}